## 완벽 공략 18. 가비지 컬렉션

- Mark, Sweep, Compact
  - Mark : 객체가 참조가 되고 있는지 안 되고 있는지 체크 (마킹)
  - Sweep : 불필요한 객체를 실제 힙 메모리에서 제거
  - Compact : 파편화된 메모리 공간들을 한곳으로 모으는 작업
- Young Generation (Eden, S0, S1), Old Generation
  - Young Generation 
    - 최초 객체 생성 시 Eden 영역에 생성 후 Eden 영역이 꽉 차게 되면 GC 발생
    - 위 상황에서 불필요한 객체는 제거 후 나머지 살아남은 객체들만 S0 으로 이동 (Eden, S2 영역을 클리어하게 남겨둠)
    - 이후 Eden 에서 새로운 객체들을 생성 후 Eden 영역이 꽉 차게 되면 GC 발생하고, S0 의 객체들을 S2 로 이동 및 Eden 을 S2 로 이동
    - 위 과정을 반복하며, 계속 살아남는 객체는 Old Generation 로 이동
  - Old Generation 
    - 오래 살아남는 객체들을 Young Generation 에서 Old Generation 이동시켜 관리
- Minor GC, Full GC
  - Minor GC : Young Generation 에서 일어나는 GC
  - Full GC : Young Generation, Old Generation 동시에 발생하는 GC (* 가비지 컬렉션의 핵심 - Full GC 여러 가지 방법)
    - Java8 Default GC : Parallel GC
    - Java11 Default GC : G1 GC
- Serial, Parallel, CMS, G1, 'ZGC', Shenandoah
- Throughput, 'Latency (Stop-The-World)', Footprint
  - Throughput : GC 발생 시 얼마만큼의 리소스를 GC 에 할애하는지 (Full GC 수행과 동시에 별도 쓰레드를 통해 Mark, Sweep, Compact 과정을 수행할 수도 있음, 그러한 경우 Throughput 이 그만큼 떨어지게 됨) 
  - Latency (Stop-The-World) : GC 만 수행 가능 (새로운 객체 생성 불가능 / 요청 처리 불가)
    - CMS GC 방식부터 Latency 를 줄이는데 고려 (java 11 버전부터는 제외됨 - deprecated)
  - Footprint : GC 알고리즘에 사용될 메모리 사용량
- 참고
  - How to choose the best Java garbage collector
